ĐIỆN TỬ-TIN HỌC NGÀNH ĐIỆN TỬ
NHIỆM VỤ LUẬN VĂN TỐT NGHIỆP
Họ và tên sinh viên :
Lớp: ĐHĐT
Ngành : Điện Tử Công Nghiệp
Tên đề tài: BĂNG CHUYỀN ĐẾM VÀ PHÂN LOẠI SẢN PHẨM
1. Dùng vi xử lý AT89C51
…………………………………………………………………………………………………………………………………………………………………………………………………
…………………………………………………………………………………………………………………………………………………………………………………………………
2. Các số liệu ban đầu:
…………………………………………………………………………………………………………………………………………………………………………………………………
…………………………………………………………………………………………………………………………………………………………………………………………………
3. Nội dung:
…………………………………………………………………………………………………………………………………………………………………………………………………
…………………………………………………………………………………………………………………………………………………………………………………………………
4. Các phần liên quan:
LỜI NÓI ĐẦU
Ngày nay cùng với sự phát triển của các ngành khoa học kỹ thuật, kỹ thuật điện tử màtrong đó là kỹ thuật số đóng vai trò quan trọng trong mọi lĩnh vực khoa học kỹ thuật, quản lí, công nghiệp tự động hóa, cung cấp thông tin…. do đó chúng ta phải nắm bắt và vận dụng nó một cách có hiệu quả nhằm góp phần vào sự phát triển nền khoa học kỹ thuật thế giới nói chung và trong sự phát triển kỹ thuật điện tử nói riêng
Xuất phát từ những đợt đi thực tập tốt nghiệp tại nhà máy và tham quan các doanh nghiệp sản xuất, chúng em đã được thấy nhiều khâu được tự động hóa trong quá trình sản xuất. Một trong những khâu đơn giản trong dây chuyền sản xuất tự động hóa đó là số lượng sản phẩm làm ra được đếm một cách tự động.
Tuy nhiên đối với những doanh nghiệp vừa và nhỏ thì việc tự động hóa hoàn toàn chưa được áp dụng trong những khâu đếm sản phẩm, đóng bao bì mà vẫn còn sử dụng nhân công.
Từ những điều đã được thấy đó và khả năng của chúng em, chúng em muốn làm một điều gì nhỏ để góp phần vào giúp người lao động bớt phần mệt nhọc chân tay mà cho phép tăng hiệu suất lao động lên gấp nhiều lần, đồng thời đảm bảo được độ chính xác cao. Nên chúng em quyết định thiết kế một mạch đếm sản phẩm vì nó rất gần gũi với thực tế và nó thật sự rất có ý nghĩa đối với chúng em vì đã làm được một phần nhỏ đóng góp cho xã hội.Tuy nhiên, do phần kiến thức còn hạn chế cũng như sự tác động của nhiều điều kiện khách quan khác , do vậy đề tài của chúng em không thể tránh khỏi những sai sót chúng em kính mong sự đóng góp ý kiến của của quý Thầy Cô để có thể hoàn thành đề tài này được tốt hơn.
Mọi ý kiến đóng góp của qúy Thầy Cô chúng em xin ghi nhận và thành thật biết ơn.
Xin trân trọng kính chào
MỤC LỤC
Chương I:GIỚI THIỆU LINH KIỆN Trang

1.1 Màn hình LCD 1 1.2 IC nhớ AT24C04 2 1.3 Khái quát về op_amp 3 1.4 Động cơ một chiều 4 1.5 Vi điều khiển AT89C51 1.5.1 Cấu trúc phần cứng họ MCS-51 1.5.2 Khảo sát sơ đồ chân at89c51, chức năng từng chân 7 1.5.3 Hoạt động timer của at89c51 11 1.5.4 Tóm tắt tập lệnh của at89c51 13 CHƯƠNG II: NGUYÊN LÝ HOẠT ĐỘNG 2.1 Sơ đồ ngyuên lý 15 2.2 Sơ đồ khối 16 2.3 Lưu đồ giải thuật 17 2.4 Nguyên lý hoạt động 22 2.4.1 Hoạt động của khối động lực 23 2.4.2 Hoạt động của cảm biến 24 2.4.3 Hoạt động của khối hiển thị Chương III: THI CÔNG MẠCH 3.1 Sơ đồ mạch in 26 3.1.1 Khối xử lý 3.1.2 Mạch Thu Phát Hồng Ngọai 28 3.2 Chương Trình 29 3.3 Kết quả thi công 53 Kết Luận 54 Tài liệu tham khảo 55

CHƯƠNG I: GIỚI THIỆU LINH KIỆN 1.1 Màn hình LCD : Để hiển thị tiết kiệm năng lượng và linh hoạt hơn chúng em sử dụng bộ hiển thị LCD 20 x 4 ,hiển thị 4 dòng mỗi dòng 20 ký tự , LCD này sử dụng IC điều khiển HD44780 . Sơ đồ chân của LCD như sau: Chân số Tên Chức năng 1 Vss Đất 2 Vdd Nguồn + 3 Vee Tương phản 4 RS Chọn thanh ghi 5 R/W Read/Write 6 E Enable 7 D0 Bit 0 8 D1 Bit 1 9 D2 Bit 2 10 D3 Bit 3 11 D4 Bit 4 12 D5 Bit 5 13 D6 Bit 6 14 D7 Bit 7 Nguồn cấp cho LCD 5 VDC ,dòng khoảng vài mA , chân số 3 là chân điều khiển Vee dùng để thay đổi độ tương phản màn hình hiển thị , lý tưởng thì chân này nối lên nguồn đện áp thay đổi được , khi sử dụng thực hiện bằng cách gắn mạch chia áp dùng biến trở đầu ra thay đổi đưa vào chân này . Chân 4 là đường RS đây là một trong ba ngõ vào điều khiển lệnh . Khi chân này mức thấp thì các dữ liệu được truyền đến LCD được xử lý như các mệnh

lệnh và các dữ liệu đọc ra chỉ trạng thái của nó. Bằng cach đưa đường RS này lên mức cao thì dữ liệu ký tự có thể xuất / nhập trên module này. Chân số 5 là đường R/W , chân này được kéo xuống mức thâp để ghi các lệnh hay dữ lịêu ký tự vào module hoặc kéo lên mức cao để đọc dữ liệu hay ký tự từ các thanh ghi của nó. Chân số 6 là đường enable ,ngõ vào này dùng để khởi động việc chuyển các lệnh hay dữ liệu ký tự giữa module và các đường dữ liệu . Khi ghi ra màn hình hiển thị LCD , dữ liệu cỉi được chuyển khi có cạnh xuống của tín hiệu E này. Tuy nhiên khi đọc ra từ LCD thì dữ liệu khả dụng sau khi có chuyển tiếp từ thâp lên cao và duy trì dữ liệu khả dụng cho đến khi dữ liệu xuống mức thấp một lần nữa. Các chân từ 7 đến 14 là các đường bus dữ liệu . Dữ liệu có thể chuyển đến hoặc lấy ra khỏi bộ hiển thị LCD theo dạng một byte 8 bit hay dạng nửa byte 4 bit . 1.2 IC NHỚ AT_24C04: IC nhớ ATMEL 24c04 (512 byte) giao tiếp thuộc chuẩn bus IC2 , chương trình thực hiện chức năng đọc ghi và hiển thị qua led ,LCD và có thể giao tiếp máy tính qua cổng serial của máy tính . Khi IC2 nhận được tín hiệu gởi từ IC master nếu địa chỉ này đúng thì IC sẽ xuất một xung “xác nhận” đến IC master để báo hiệu cho IC master biết nó sẵn sàng bằng cách hạ đường dẫn SDA xuống mức thấp 0 (bit thứ 9). Cách dọc /ghi bus Ic: A6 A5 A4 A3 A2 A1 A0 R/W RW = 0 : WRITE RW = 1: READ Điều khiển bus IC, đối với IC at24c04 thì định địa chỉ như sau: 1.3 KHÁI QUÁT VỀ OP-AMP: 1.3.1 Đặc điểm: Op-amp là linh kiện quan trọng trong các mạch điện tử, nó có thể ứng dụng để khuếch đại, tạo xung, ổn áp … Một op-amp có thể được nuôi bằng nguồn đôi đối xứng hoặc nguồn đơn. Op- amp có hai ngõ vào nhận tín hiệu là : + V1 nối vào chân “ +” gọi là ngõ vào không đảo. + V2 nố vào chân “ –” gọi là ngõ vào đảo . Một ngõ ra Vo nối đến tải. Một op-amp được gọi là lý tưởng nếu nó thỏa mãn các điều kiện sau đây - Trở kháng vào rất lớn . - Trở kháng ra rất nhỏ. - Dòng điện vào rât nhỏ I+ = I- = 0 - Băng thông từ 0 đến vô cực. - Hệ số khuếch đại vòng hở rất lớn . - Tỷ số tín hiệu trên nhiễu S/N = vô cực . 1.3.2 Gíơi thiệu TL082:nhiệt độ làm việc từ 0 Oc đến 70 Oc lọai I từ –40 Oc đến 85 Oc và đối với lọai M nhiệt độ làm việc từ –55 Oc đến 125 Oc.Bên trong IC TL082 gồm hai
op_amp. 1.4 Động cơ một chiều: Động cơ một chiều thường là lọai nam châm vĩnh cửu ở stator, có chỗi để cấp điện vào cuộn đây rotor, được điều khiển bằng cách thay đổi điện áp và cực tính điện áp một chiều đưa vào động cơ . Có hai phương pháp điều khiển là điều khiển tuyến tính và điều khiển động rộng xung . Điều khiển tuyến tính dùng hai transistor họat động ở chế đođẩy kéo lớp B do đó hiệu suất không cao, chủ yếu công suất thấp mạch công suất điều khiển chế tạo dưới dạng IC OP-AMP công suất. Điều khiển độ rộng xung thông qua bộ khuếch đại công suất độ rộng xung, điện áp đưa vào động cơ là xung có chu kỳ cố định khá nhỏ, bề rộng thay đổi, thường chọn tần số xung từ vài trăm Hz đến 20KHz. Tùy theo áp dụng công suất động cơ có thể từ vài óat đến vài trăm óat, điện áp cung cấp 24v đến 200v và dòng động cơ từ vài A đến vài chục A. 1.5 VI ĐIỀU KHIỂN AT89C51: 1.5.1 GIỚI THIỆU CẤU TRÚC PHẦN CỨNG HỌ MCS-51 (AT89C51): MCS-51 là họ IC vi điều khiển do hãng Intel sản xuất. Các IC tiêu biểu cho họ là 89C51 và 8031. Các sản phẩm MCS-51 thích hợp cho những ứng dụng điều khiển. Việc xử lý trên Byte và các toán số học ở cấu trúc dữ liệu nhỏ được thực hiện bằng nhiều chế độ truy xuất dữ liệu nhanh trên RAM nội. Tập lệnh cung cấp một bảng tiện dụng của những lệnh số học 8 Bit gồm cả lệnh nhân và lệnh chia. Nó cung cấp những hổ trợ mở rộng trên Chip dùng cho những biến một Bit như là kiểu dữ liệu riêng biệt cho phép quản lý và kiểm tra Bit trực tiếp trong điều khiển và những hệ thống logic đòi hỏi xử lý luận lý. 89C51 à một vi điều khiển 8 Bit, chế tạo theo công nghệ CMOS chất lượng cao, công suất thấp với 4 KB PEROM (Flash Programeable and erasable read only
memory). Thiết bị này được chế tạo bằng cách sử dụng bộ nhớ không bốc hơi mật độ cao của ATMEL và tương thích với chuẩn công nghiệp MCS-51 về tập lệnh và các chân ra. PEROM ON-CHIP cho phép bộ nhớ lập trình được lập trình trong hệ thống hoặc bởi một lập trình viên bình thường. Bằng cách kết hợp một CPU 8 Bit với một PEROM trên một Chip đơn, ATMEL AT89C51 là một vi điều khiển mạnh (có công suất lớn) mà nó cung ấp một sự linh động cao và giải pháp về giá cả đối với nhiều ứng dụng vi điều khiển. AT89C51 cung cấp những đặc tính chuẩn như sau: 4 KB bộ nhớ chỉ đọc có thể xóa và lập trình nhanh (EPROM), 128 Byte RAM, 32 đường I/O, 2 TIMER/COUNTER 16 Bit , 5 vectơ ngắt có cấu trúc 2 mức ngắt, một Port nối tiếp bán song công, 1 mạch dao động tạo xung Clock và bộ dao động ON-CHIP. Thêm vào đó, AT89C51 được thiết kế với logic tĩnh cho hoạt động đến mức không tần số và hỗ trợ hai phần mềm có thể lựa chọn những chế độ tiết kiệm công suất, chế độ chờ (IDLE MODE) sẽ dừng CPU trong khi vẫn cho phép RAM, timer/counter, port nối tiếp và hệ thống ngắt tiếp tục hoạt động. Chế độ giảm công suất sẽ lưu nội dung RAM nhưng sẽ treo bộ dao động làm mất khả năng hoạt động của tất cả những chức năng khác cho đến khi Reset hệ thống. Các đặc điểm của AT89C51 được tóm tắt như sau: - 4k byte ROM flash bên trong. - 128 byte RAM nội. - 4 Port xuất nhập 8 bit. - 2 bộ đếm/ định thời 16 bit. - Giao tiếp nối tiếp. - 64k byte không gian bộ nhớ chương trình mở rộng. - 64k byte không gian bộ nhớ dữ liệu mở rộng. - Một bộ xử lý luận lý (thao tác trên các bít đơn). - 210 bit được địa chỉ hóa. - Bộ nhân / chia 4.
.................................................... Hình1-2 Sơ đồ chân IC AT8C951 2.Chức năng các chân của AT89C51 - AT89C51 có tất cả 40 chân có chức năng như các đường xuất nhập. Trong đó có 24 chân có tác dụng kép (có nghĩa 1 chân có 2 chức năng), mỗi đường có thể hoạt động như đường xuất nhập hoặc như đường điều khiển hoặc là thành phần của các bus dữ liệu và bus địa chỉ.
a.Các Port: ˆ Port 0: - Port 0 là port có 2 chức năng ở các chân 32 – 39 của 89C51. Trong các thiết kế cỡ nhỏ không dùng bộ nhớ mở rộng nó có chức năng như các đường IO. Đối với các thiết kế cỡ lớn có bộ nhớ mở rộng, nó được kết hợp giữa bus địa chỉ và bus dữ liệu. ˆ Port 1: - Port 1 là port IO trên các chân 1-8. Các chân được ký hiệu P1.0, P1.1, P1.2, … có thề dùng cho giao tiếp với các thiết bị ngoài nếu cần. Port 1 không có chức năng khác, vì vậy chúng chỉ được dùng cho giao tiếp với các thiết bị bên ngoài. ˆ Port 2: - Port 2 là 1 port có tác dụng kép trên các chân 21- 28 được dùng như các đường xuất nhập hoặc là byte cao của bus địa chỉ đối với các thiết bị dùng bộ nhớ mở rộng. ˆ Port 3: - Port 3 là port có tác dụng kép trên các chân 10-17. Các chân của port này có nhiều chức năng, các công dụng chuyển đổi có liên hệ với các đặc tính đặc biệt của 8951 như ở bảng sau: Bit Tên Chức năng chuyển đổi P3.0 P3.1 P3.2 P3.3 P3.4 P3.5 P3.6 P3.7 RXT TXD INT0\ INT1\ T0 T1 WR\ RD\ Ngõ vào dữ liệu nối tiếp. Ngõ xuất dữ liệu nối tiếp. Ngõ vào ngắt cứng thứ 0. Ngõ vào ngắt cứng thư 1. Ngõ vào củaTIMER/COUNTER thứ 0. Ngõ vào củaTIMER/COUNTER thứ 1. Tín hiệu ghi dữ liệu lên bộ nhớ ngoài. Tín hiệu đọc bộ nhớ dữ liệu ngoài. b.Các ngõ tín hiệu điều khiển: ˆ Ngõ tín hiệu PSEN (Program store enable):
- PSEN là tín hiệu ngõ ra ở chân 29 có tác dụng cho phép đọc bộ nhớ chương trình mở rộng thường được nói đến chân 0E\ (output enable) của Eprom cho phép đọc các byte mã lệnh. - PSEN ở mức thấp trong thời gian Microcontroller AT89C51 lấy lệnh. Các mã lệnh của chương trình được đọc từ Eprom qua bus dữ liệu và được chốt vào thanh ghi lệnh bên trong 8951 để giải mã lệnh. Khi AT89C51 thi hành chương trình trong ROM nội PSEN sẽ ở mức logic 1. ˆ Ngõ tín hiệu điều khiển ALE (Address Latch Enable): - Khi AT89C51 truy xuất bộ nhơđ bên ngoài, port 0 có chức năng là bus địa chỉ và bus dữ liệu do đó phải tách các đường dữ liệu và địa chỉ. Tín hiệu ra ALE ở chân thứ 30 dùng làm tín hiệu điều khiển để giải đa hợp các đường địa chỉ và dữ liệu khi kết nối chúng với IC chốt. - Tín hiệu ra ở chân ALE là một xung trong khoảng thời gian port 0 đóng vai trò là địa chỉ thấp nên chốt địa chỉ hoàn toàn tự động. Các xung tín hiệu ALE có tốc độ bằng 1/6 lần tần số dao động trên chip và có thể được dùng làm tín hiệu clock cho các phần khác của hệ thống. Chân ALE được dùng làm ngõ vào xung lập trình cho Eprom trong AT89C51. ˆ Ngõ tín hiệu EA\(External Access) : - Tín hiệu vào EA\ ở chân 31 thường được mắt lên mức 1 hoặc mức 0. Nếu ở mức 1, 8951 thi hành chương trình từ ROM nội trong khoảng địa chỉ thấp 8 Kbyte. Nếu ở mức 0, 8951 sẽ thi hành chương trình từ bộ nhớ mở rộng. Chân EA\ được lấy làm chân cấp nguồn 21V khi lập trnh cho Eprom trong AT89C51. ˆ Ngõ tín hiệu RST (Reset): -Ngõ vào RST ở chân 9 là ngõ vào Reset của AT89C51. Khi ngõ vào tín hiệu này đưa lên cao ít nhất là 2 chu kỳ máy, các thanh ghi bên trong được nạp những giá trị thích hợp để khởi động hệ thống. Khi cấp điện mạch tự động Reset. ˆ Các ngõ vào bộ giao động XTAL1,XTAL2: -Bộ dao động được được tích hợp bên trong AT89C51, khi sử dụng AT89C51 người thiết kế chỉ cần kết nối thêm thạch anh và các tụ như hình vẽ trong sơ đồ. Tần số thạch anh thường sử dụng cho 8951 là 12Mhz. ˆ Chân 40 (Vcc) được nối lên nguồn 5V.

Hoạt động Reset: - AT89C51 có ngõ vào reset RST tác động ở mức cao trong khoảng thời gian 2 chu kỳ xung máy, sau đó xuống mức thấp để AT89C51 bắt đầu làm việc. RST có thể kích bằng tay bằng một phím nhấn thường hở, sơ đồ mạch reset như sau:
8.2 KΩ

Manual Reset( Reset bằng tay) Trạng thái của tất cả các thanh ghi trong AT89C51 sau khi reset hệ thống được tóm tắt như sau: Thanh ghi Nội dung Đếm chương trình PC Thanh ghi tích lũyA Thanh ghi B Thanh ghi thái PSW SP DPRT Port 0 đến port 3 IP IE Các thanh ghi định thời SCON SBUF PCON (HMOS) PCON (CMOS) 0000H 00H 00H 00H 07H 0000H FFH XXX0 0000 B 0X0X 0000 B 00H 00H 00H 0XXX XXXXH 0XXX 0000 B -Thanh ghi quan trọng nhất là thanh ghi bộ đếm chương trình PC được reset tại địa chỉ 0000H. Khi ngõ vào RST xuống mức thấp, chương trình luôn bắt đầu tại địa
chỉ 0000H của bộ nhớ chương trình. Nội dung của RAM trên chip không bị thay đổi bởi tác động của ngõ vào reset. 1.5.3. HOẠT ĐỘNG TIMER CỦA AT89C51: 1. GIỚI THIỆU: - Bộ định thời của Timer là một chuỗi các Flip Flop được chia làm 2, nó nhận tín hiệu vào là một nguồn xung clock, xung clock được đưa vào Flip Flop thứ nhất là xung clock của Flip Flop thứ hai mà nó cũng chia tần số clock này cho 2 và cứ tiếp tục. - Vì mỗi tầng kế tiếp chia cho 2, nên Timer n tầng phải chia tần số clock ngõ vào cho 2n. Ngõ ra của tầng cuối cùng là clock của Flip Flop tràn Timer hoặc cờ mà nó kiểm tra bởi phần mềm hoặc sinh ra ngắt. Giá trị nhị phân trong các FF của bộ Timer có thể được nghỉ như đếm xung clock hoặc các sự kiện quan trọng bởi vì Timer được khởi động. Ví dụ Timer 16 bit có thể đếm đến từ FFFFH sang 0000H. 2. CÁC THANH GHI ĐIỀU KHIỂN TIMER (TIMER MODE REGITER): 2.1 Thanh ghi điều khiển chế độ timer TMOD (timer mod register) Bit Name Timer Description 7 GATE 1 Khi GATE = 1, Timer chỉ làm việc khi INT1=1 6 C/T 1 Bit cho đếm sự kiện hay ghi giờ C/T = 1 : Đếm sự kiện C/T = 0 : Ghi giờ đều đặn 5 M1 1 Bit chọn mode của Timer 1 4 M0 1 Bit chọn mode của Timer 1 - Than` ghi mode gồm hai nhóm 4 bit là: 4 bit thấp đặt mode hoạt động cho Timer 0 và 4 bit cao đặt mode hoạt động cho Timer 1. 8 bit của thanh ghi TMOD được tóm tắt như sau:

3 GATE 0 Bit cổng của Timer 0 2 C/T 0 Bit chọn Counter/Timer của Timer 0 1 M1 0 Bit chọn mode của Timer 0 0 M0 0 Bit chọn mode của Timer 0 Hai bit M0 và M1 của TMOD để chọn mode cho Timer 0 hoặc Timer 1. M1 M0 MODE DESCRIPTION 0 0 0 Mode Timer 13 bit (mode 8048) 0 1 1 Mode Timer 16 bit 1 0 2 Mode tự động nạp 8 bit 1 1 3 Mode Timer tách ra : Timer 0 : TL0 là Timer 8 bit được điều khiển bởi các bit của Timer 0. TH0 tương tự nhưng được điều khiển bởi các bit của mode Timer 1. Timer 1 : Được ngừng lại. - TMOD không có bit địn` vị, nó thường được LOAD một lần bởi phần mềm ở đầu chương trình để khởi động mode Timer. Sau đó sự định giờ có thể dừng lại, được khởi động lại như thế bởi sự truy xuất các thanh ghi chức năng đặc biệt của Timer khác. 2.2 Thanh ghi điều khiển timer TCON (timer control register) : Bit Symbol Bit Address Description TCON.7 TF1 8FH Cờ tràn Timer 1 được set bởi phần cứng ở sự tràn, được xóabởi phần mềm hoặc bởi phần cứng khi các vectơxử lý đến - Thanh ghi điều khiển bao gồm các bit trạng thái và các bit điều khiển bởi Timer 0 và Timer 1. Thanh ghi TCON có bit định vị. Hoạt động của từng bit được tóm tắt như sau:
thủ tục phục vụ ngắt ISR TCON.6 TR1 8EH Bit điều khiển chạy Timer 1 được set hoặc xóa bởi phần mềm để chạy hoặc ngưng chạy Timer. TCON.5 TF0 8DH Cờ tràn Timer 0(hoạt động tương tự TF1) TCON.4 TR0 8CH Bit điều khiển chạy Timer 0 (giống TR1) TCON.3 IE1 8BH Cờ kiểu ngắt 1 ngoài. Khi cạnh xuống xuất hiện trên INT1 thì IE1 được xóa bởi phần mềm hoặc phần cứng khi CPU định hướng đến thủ tục phục vụ ngắt ngoài. TCON.2 IT1 8AH Cờ kiểu ngắt 1 ngoài được set hoặc xóa bằng phấn mềm bởi cạnh kích hoạt bởi sự ngắt nggài. TCON.1 IE0 89H Cờ cạnh ngắt 0 ngoài TCON IT0 88H Cờ kiểu ngắt 0 ngoài.
1.5.4 TÓM TẮT TẬP LỆNH CỦA AT89C51
Các chương trình được cấu tạo từ nhiều lệnh, chúng được xây dựng logic, sự nối tiếp của các lệnh được nghĩ ra một cách hiệu quả và nhanh, kết quả của chương trình thì khả quan.
Tập lệnh họ MSC-51 được sự kiểm tra của các mode định vị và các lệnh của chúng có các Opcode 8 bit. Điều này cung cấp khả năng 28=256 lệnh được thi hành và một lệnh không được định nghĩa. Vài lệnh có 1 hoặc 2 byte bởi dữ liệu hoặc địa chỉ thêm vào Opcode. Trong toàn bộ các lệnh có 139 lệnh 1 byte, 92 lệnh 2 byte và
24 lệnh 3 byte.
1. Các chế độ định vị địa chỉ (Addressing mode ):
Các mode định vị là một bộ phận thống nhất của tập lệnh mỗi máy tính. Chúng cho phép định rõ nguồn hoặc nơi gởi tới của dữ liệu ở các đường khác nhau
..................................................
READB_24: MOV A,#8 ;DU LIEU SAU KHI DOC DUOC CAT VAO A MOV COUNT,A NEXTR: LCALL CLOCK_24 RLC A DJNZ COUNT,NEXTR RET ;************************************ reset_at24: mov addhi,#00h mov addlo,#00h loop_clear: mov addhi,#00h mov rwdata,#00h lcall pool_write_24 inc addlo mov R7,addlo cjne R7,#20,loop_clear ret ;******************************************* BCD_SO: MOV DPTR,#BANG_SO MOVC A,@A+DPTR MOV DATA_so,A



END RET ;******************************************* bang_so: db 30h,31h,32h,33h,34h,35h,36h,37h,38h,39h ;********************************************
3.3 KẾT QUẢ THI CÔNG : “Băng chuyền đếm và phân loại sản phẩm” hoạt động đúng yêu cầu kỹ thuật mà đề tài đưa ra .
KẾT LUẬN Qua 4 tuần làm việc với sự nô lực của cả nhóm và kiến thức được trang bị ở nhà trường, các kiến thức thực tế mà chúng em học hỏi được nhờ sự giúp đỡ của các thầy cô trong Khoa Điện Tử -Tin Học cùng với sự giúp đỡ tận tình của Thầy:nên chúng em đã hoàn thành tập luận văn này đúng thời gian quy định và thu được những kết quả nhất định: Thiết kế băng chuyền đếm và phân loại sản phẩm. Viết chương trình để nạp cho IC AT89C51. Đây là lần đầu tiên thực hiện đề tài với quy mô rộng, nhưng vì thời gian, kiến thức và kinh nghiệm còn nhiều mặt hạn chế nên chúng em nhận thấy tập luận văn này chưa đáp ứng được nhu cầu đề tài ra ...Do đó, chúng em mong rằng với sự thiếu sót trên, chúng em sẽ nhận được sự thông cảm và chỉ dẫn thêm của quý thầy cô trong Khoa Điện Tư -Tin Học cùng giáo viên hướng dẫn. Chúng em xin chân thành cảm ơn sự giúp đỡ tận tình và quý báu của các thầy cô đã tạo điều kiện cho chúng em hoàn thành tốt nhiệm vụ được giao đúng thời gian quy định. Chúng em rất mong sự đóng góp ý kiến của quý thầy cô cùng các bạn để tập luận văn được hoàn hảo hơn. HƯỚNG PHÁT TRIỂN ĐỀ TÀI: Ngày nay với sự phát triển nhanh chóng của ngành khoa học kỹ thuật và đất nước ta đang dần chuyển sang một nền sản xuất công nghiệp. Do đó, để đáp ứng với nhu cầu sản xuất tự động hóa của các quy mô lớn thì chúng ta cần phải nghiên cứu thêm các loại giao diện khác với họ vi điều khiển để phát triển thêm trong ngành kỹ thuật điều khiển. Ngoài ra, còn có thể dựa trên tập luận án này để viết thêm nhiều chương trình khác có thểm ứng dụng trong thực tế và cải thiện chương trình này để tiện lợi cho người sử dụng ...
TÀI LIỆU THAM KHẢO
1. TRUYỀN DỮ LIỆU
Tống Văn On _ ĐH _ KỸ THẬT TPHCM_ 1997
2. Giáo trình Vi Xử Lý – Vi điều khiển
Người soạn: Nguyễn Đình Phú
3. LẬP TRÌNH CHO CÁC HỆ VI XỬ LÝ Biên sọan: Hùynh Thúc Cước
Đặng Văn Đức Nghiêm Mỹ Nguyễn Văn Tam Trần Bá Thái Nguyễn Chí Thức
Nhà xuất bản Thống Kê
4. VI XỬ LÝ TRONG ĐO LƯỜNG VÀ ĐIỀU KHIỂN Ngô Diệp Tân _ NXB KHKT Hà Nội _1996
5. KỸ THUẬT VI ĐIỀU KHIỂN
Tác giả : Văn Thế Minh_NXB GD_1997
6. THE 8051 MICROCONTROLLER Tác Giả: Scott MacKenzie
7. TRÌNH BIÊN DỊCH ASM51.
8. SƠ ĐỒ CHÂN LINH KIỆN BÁN DẪN
Dương Minh Trí _ Sở GD – ĐT TPHCM- 1992
9. HỌ VI ĐIỀU KHIỂN 8051
Tống Văn On – NXB LĐ - XH Hà Nội - 2001
